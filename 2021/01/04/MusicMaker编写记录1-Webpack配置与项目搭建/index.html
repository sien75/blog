<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="preload" crossorigin="crossorigin" href="/blog/fonts/roboto/Roboto-Regular.woff2" as="font">
        <link rel="preload" crossorigin="crossorigin" href="/blog/fonts/roboto/Roboto-Bold.woff2" as="font">
    
    
    
        <link rel="shortcut icon" href="/blog/imgs/favicon.png">
    
    
    
<link rel="stylesheet" href="/blog/css/mdui.min.css">
<link rel="stylesheet" href="/blog/css/main.css">
<link rel="stylesheet" href="/blog/css/iconfont.css">

    
    













    
    
    <title>
        
            MusicMaker编写记录1-Webpack配置与项目搭建 | Sien75&#39;s Blog
        
    </title>
    
    
<meta name="generator" content="Hexo 5.1.1"></head>
<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-teal mdui-theme-accent-blue">
  
  <header class="mdui-appbar mdui-appbar-fixed">
  <div id="toolbar" class="mdui-toolbar mdui-color-theme">
    <button class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar', swipe: true}"><i class="iconfont icon-menu"></i></button>
    <a href="/blog/" class="mdui-typo-headline">Sien75&#39;s Blog</a>
    <a href="/blog/" class="header-subtitle mdui-typo-headline"></a>
    <div class="mdui-toolbar-spacer"></div>
    <button class="mdui-btn mdui-btn-icon" mdui-dialog="{target: '#search'}" mdui-tooltip="{content: 'search'}"><i class="iconfont icon-search"></i></button>
  </div>
</header>

<div class="mdui-dialog" id="search">
  
    <div class="search-form">
      <input type="search" class="search-form-input" placeholder="请输入关键字" onfocus="listenSearchFunc()">
    </div>
    <div class="search-result" data-resource="/blog/search.xml"></div>
  
</div>

  <aside id="sidebar" class="mdui-drawer">
    <div class="mdui-tab" mdui-tab>
        <a href="#sidebar-tab1" id="sidebartab" class="mdui-ripple mdui-tab-active">站点概览</a>
        <a href="#sidebar-tab2" id="sidebartab" class="mdui-ripple">关于</a>
    </div>

    
    <div id="sidebar-tab1" class="mdui-p-a-2">
        <div class="mdui-list">
            
                
                <a href="/blog/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-home"></i>
                    </div>
                    <div class="mdui-list-item-content">主页</div>
                </a>
            
                
                <a href="/blog/tags/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-bookmark"></i>
                    </div>
                    <div class="mdui-list-item-content">标签</div>
                </a>
            
                
                <a href="/blog/categories/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-folder"></i>
                    </div>
                    <div class="mdui-list-item-content">分类</div>
                </a>
            
                
                <a href="/blog/archives/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-archive"></i>
                    </div>
                    <div class="mdui-list-item-content">归档</div>
                </a>
            
            <div class="mdui-list-item mdui-ripple">
                <div class="mdui-list-item-icon">
                    <i class="iconfont icon-moon"></i>
                </div>
                <div class="mdui-list-item-content">夜间模式</div>
                <label class="mdui-switch" id="darkmode">
                  <input type="checkbox" id="nightmode_switch"/>
                  <i class="mdui-switch-icon"></i>
                </label>
            </div>           
        </div>
    </div>

    
    <div id="sidebar-tab2" class="mdui-p-a-2">
        <div class="sidebar-overview">
            <div class="sidebar-avatar">
                
                    <img src="/blog/imgs/avatar.jpg"/>
                
            </div>
            <div class="sidebar-author-name">sien75</div>
            <div class="sidebar-description"></div>
        </div>
        <div class="sidebar-links">
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-mail"></i></span>
                    <a href="mailto:sien75@icloud.com" class="mdui-chip-title">E-Mail</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a target="_blank" rel="noopener" href="https://github.com/sien75" class="mdui-chip-title">GitHub</a>
                </div>
            
        </div>
        <ul class="mdui-list" mdui-collapse="{accordion: true}">
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-link"></i>
                    </div>
                    <div class="mdui-list-item-content">友情链接</div>
                    <div class="mdui-collapse-item-arrow">
                        <i class="mdui-list-item-icon iconfont icon-angle-down"></i>
                    </div>
                </div>
                <ul class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    
                        <a target="_blank" rel="noopener" href="https://github.com/kb1000fx/hexo-theme-meadow" class="mdui-list-item mdui-ripple">
                            Meadow主题
                        </a>
                    
                </ul>
            </li>
        </ul>

    </div>

    <div class="mdui-divider"></div>
    
    
</aside>
  
  <main id="main-contain" class="mdui-container mdui-m-t-5">
    <article id="article" class="mdui-card mdui-p-b-2 mdui-m-b-5">
  <header class="mdui-card-media">
    
    
      <div class="post-header"> 
  <a class="post-header-title" href="/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/">MusicMaker编写记录1-Webpack配置与项目搭建</a>
  <div class="post-header-meta">
    <span>
      <span class="iconfont icon-calendar"></span>
      发布于:&nbsp;2021-01-04
    </span>
    <span>
      <span class="iconfont icon-calendar-check"></span>
      更新于:&nbsp;2021-01-04
    </span>
    <span>
      <span class="iconfont icon-folder"></span>
      分类于:&nbsp;<a class="category-link" href="/blog/categories/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%95/">MusicMaker编写记录</a>
    </span>
    
      <span>
        <span class="iconfont icon-eye"></span>
        阅读次数:&nbsp;
        <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
      </span>
    
  </div>
</div>   
    



    
    
    <div class="mdui-card-menu">
    
      <button class="mdui-btn mdui-btn-icon mdui-text-color-teal" mdui-menu="{target: '#share_menu', align: 'right'}"><i class="iconfont icon-share"></i></button>
      <ul class="mdui-menu" id="share_menu">
        <li class="mdui-menu-item">
          <a href="http://service.weibo.com/share/share.php?appkey=&title=MusicMaker编写记录1-Webpack配置与项目搭建&url=https://sien75.github.io/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/&pic=https://sien75.github.io/blog/blog/blog/imgs/favicon.png&searchPic=false&style=simple" target="_blank" class="mdui-ripple">分享到 Weibo</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://twitter.com/intent/tweet?text=MusicMaker编写记录1-Webpack配置与项目搭建&url=https://sien75.github.io/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/&via=sien75" target="_blank" class="mdui-ripple">分享到 Twitter</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://sien75.github.io/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" target="_blank" class="mdui-ripple">分享到 Facebook</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://plus.google.com/share?url=https://sien75.github.io/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" target="_blank" class="mdui-ripple">分享到 Google+</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://sien75.github.io/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/&title=MusicMaker编写记录1-Webpack配置与项目搭建" target="_blank" class="mdui-ripple">分享到 LinkedIn</a>
        </li>
        <li class="mdui-menu-item">
          <a href="http://connect.qq.com/widget/shareqq/index.html?site=Sien75&#39;s Blog&title=MusicMaker编写记录1-Webpack配置与项目搭建&summary=&pics=https://sien75.github.io/blog/blog/blog/imgs/favicon.png&url=https://sien75.github.io/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" target="_blank" class="mdui-ripple">分享到 QQ</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://telegram.me/share/url?url=https://sien75.github.io/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/&text=MusicMaker编写记录1-Webpack配置与项目搭建" target="_blank" class="mdui-ripple">分享到 Telegram</a>
        </li>
      </ul>
    
  </div>
  </header>
  
  
  
  
  <div class="post-tags">
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /blog/tags/Webpack/ >Webpack</a>
      </i>
    
  </div>

  
  <div class="mdui-card-content mdui-typo mdui-p-x-4">
    <p>MusicMaker是我打算做的一个可以<strong>音乐展示</strong>, <strong>即时演奏</strong>和<strong>简单编曲</strong>的软件, 这是我记录编写过程的文章.</p>
<a id="more"></a>

<hr>
<h2 id="MusicMaker简介"><a href="#MusicMaker简介" class="headerlink" title="MusicMaker简介"></a>MusicMaker简介</h2><p>MusicMaker是我打算做的一个可以<strong>音乐展示</strong>, <strong>即时演奏</strong>和<strong>简单编曲</strong>的软件, 打算使用Web前端技术做, 跨Web和所有Native端. 做这个项目的目的有两个, 一个是为了实现自己的这个想法, 另一个是练习Web前端技术. 而且这种自己从头规划, 慢慢制作是很有成就感的!</p>
<p>自己玩的项目, 不好说啥时候更新, 大家看个乐就行了.</p>
<p><strong>项目地址: <a target="_blank" rel="noopener" href="https://github.com/sien75/musicmaker">https://github.com/sien75/musicmaker</a></strong></p>
<p><strong>本次commit版本: <a target="_blank" rel="noopener" href="https://github.com/sien75/musicmaker/tree/7d6d162c407fc87a386fa6d4d4189c6ea2367150">https://github.com/sien75/musicmaker/tree/7d6d162c407fc87a386fa6d4d4189c6ea2367150</a></strong></p>
<p><strong>Docs: <a href="https://sien75.github.io/musicmaker">https://sien75.github.io/musicmaker</a></strong></p>
<hr>
<h2 id="项目设想"><a href="#项目设想" class="headerlink" title="项目设想"></a>项目设想</h2><p>之前第一版的MusicMaker分为两个部分: LivePlay和Arranger. LivePlay部分是一个键盘乐器, 可以即时演奏, 算是基本完成的. Arranger部分嘛…, 我是想做一个编曲+展示的页面. 想做的功能挺多的, 但是做到的只是个半成品.</p>
<p><img src="./musicmaker_v1.png" alt="MusicMaker"></p>
<p>第一版使用的技术是最基础的HTML+CSS+JavaScript, 搁置了很久, 但是我是一直想把这个东西做下去的. 两年过去了, 我现在已经接触到了更多的前端技术, 所以我打算另起炉灶, 用新技术重新构思, 做第二版!</p>
<p>这次我带来了几个超强的武器: Webpack, React, TypeScript. 项目搭建伊始要规划的事很多, 但主要工作就是把Webpack配置好. 在Webpack的配置过程中, 就能把项目的基本要素都串起来.</p>
<p>不过一切的开始, 应该是 – 新建一个文件夹:</p>
<p><img src="./new_folder.png" alt="新建文件夹"></p>
<p>当然, 由于我是从Github上直接拉下来的项目, 所以是有git版本控制的. 我把项目中的文件和文件夹放到另一个分支备份, 然后把master分支清空了.</p>
<p>如果是对于一个没有git的空文件夹, 那么第一步无疑是执行以下命令:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>
<p>在有了git的版本控制后, 我们接下来要干什么呢? 没错, 接下来要进行npm初始化, 生成<code>package.json</code>文件, 这个文件是node项目的核心文件:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>这样一个node项目就初始化完成了! 接下来进行目录规划:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">|- musicmaker</span><br><span class="line">    |- build</span><br><span class="line">        |- lib</span><br><span class="line">            |- ...</span><br><span class="line">        |- doc</span><br><span class="line">            |- ...</span><br><span class="line">    |- src</span><br><span class="line">        |- ...</span><br><span class="line">    |- examples</span><br><span class="line">        |- ...</span><br><span class="line">    |- public</span><br><span class="line">        |- ...</span><br><span class="line">    |- package.json</span><br><span class="line">    |- .gitignore</span><br></pre></td></tr></table></figure>
<ul>
<li><code>src</code>, 目录下是MusicMaker的库原始代码, 这一部分是Musicmaker的核心功能部分</li>
<li><code>examples</code>, 目录下是对MusicMaker库的使用, 也就是说这一部分是用于向其他人介绍使用方法, 并展示效果的</li>
<li><code>build/lib</code>, 目录下是生成的库文件</li>
<li><code>build/doc</code>, 目录下是构建好的<code>examples</code>页面(即Docs页), 这一部分会直接部署到项目的GitHub Page上</li>
</ul>
<hr>
<h2 id="如何构建"><a href="#如何构建" class="headerlink" title="如何构建"></a>如何构建</h2><p>一个项目的基础骨架搭建好了, 接下来就是注入灵魂的时候了:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i -D webpack webpack-cli webpack-dev-server</span><br></pre></td></tr></table></figure>

<p>我打算使用Webpack构建Docs页, 并用Webpack构建既可以使用<code>&lt;script&gt;</code>标签引入, 也可以使用<code>import</code>引入的MusicMaker库.</p>
<p>但是使用MusicMaker库依赖React, 直接在<code>&lt;script&gt;</code>标签里写JSX, 不是一件明智的行为. 所以我取消了库可以用<code>&lt;script&gt;</code>标签引入的打算.</p>
<p>我一开始也打算用Webpack构建MusicMaker库, 但是Webpack会把一个entry打包成一个文件输出, 无法保持原目录结构, 也无法生成.d.ts文件, 所以构建库需要另选工具.</p>
<p>使用Typescript的命令行工具<code>tsc</code>可以直接生成<code>.d.ts</code>文件, 所以这是一个构建库的不错的工具. 对于库来说CSS和JavaScript的构建是两条生产线, 我使用<code>sass</code>命令行工具来实现<code>.scss</code>文件的编译.</p>
<p><code>package.json</code>内容如下:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;webpack serve --config webpack/config.doc.dev.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --config webpack/config.doc.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build:lib&quot;</span>: <span class="string">&quot;rm -rf build/lib/* &amp;&amp; tsc --project tsconfig.lib.json &amp;&amp; sass src:build/lib --no-source-map&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Webpack的主要功能有两个: A – “开发”到”发布”的转换, B – 实时观察”开发”的效果. 在这里面, <code>start</code>是使用的B功能, <code>build</code>是使用的A功能.</p>
<p><code>start</code>是会以<code>examples</code>文件夹的文件为入口, 而<code>examples</code>内的文件会依赖<code>src</code>内的核心库文件. 这个是用于实时开发, 观察Docs页的效果. 当然我也会借用此来调试MusicMaker库.</p>
<p><code>build</code>就是构建Docs页, <code>start</code>是即时开发, 而<code>build</code>则是输出构建好的文件, 构建好的页面会直接部署到Github Page上. 和<code>start</code>一样, <code>build</code>会以<code>examples</code>文件夹的文件为入口, 而<code>examples</code>内的文件会依赖<code>src</code>内的核心库文件.</p>
<p><code>build:lib</code>是构建MusicMaker库的命令, 这个命令都会以<code>src</code>目录下的文件为入口, 涉及<code>src</code>目录下的文件, 但不会涉及<code>examples</code>下的文件. 这里3个命令作用为:</p>
<ul>
<li><code>rm -rf build/lib/*</code>, 删除原有的库文件</li>
<li><code>tsc --project tsconfig.lib.json</code>, 使用<code>tsc</code>编译<code>.tsx</code>生成<code>.js</code>和<code>.d.ts</code>文件</li>
<li><code>sass src:build/lib</code>, 使用<code>sass</code>编译<code>.scss</code>生成<code>.css</code></li>
</ul>
<p>项目的Webpack配置文件都会放在<code>webpack</code>文件夹内, <code>entries.js</code>, <code>plugins.js</code>和<code>loaders.js</code>这3个基本的配置文件, 是会被各<code>config.xxx.js</code>依赖的.</p>
<p>项目使用Babel来配合Webpack编译<code>.tsx</code>文件, Babel配置文件为项目根目录下的<code>.babelrc</code>文件.</p>
<p>项目的TypeScript配置文件为<code>tsconfig.json</code>, 不过这个只是用于智能提醒编辑器的, 真正的<code>tsc</code>编译时使用的配置文件是<code>tsconfig.lib.json</code>.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">上述提及的配置文件位置如下:</span><br><span class="line">|- musicmaker</span><br><span class="line">    |- ...</span><br><span class="line">    |- webpack</span><br><span class="line">        |- entries.js</span><br><span class="line">        |- plugins.js</span><br><span class="line">        |- loaders.js</span><br><span class="line">        |- config.doc.dev.js</span><br><span class="line">        |- config.doc.js</span><br><span class="line">        |- config.lib.js</span><br><span class="line">    |- package.json</span><br><span class="line">    |- .babelrc</span><br><span class="line">    |- tsconfig.json</span><br><span class="line">    |- tsconfig.lib.json</span><br></pre></td></tr></table></figure>

<p>接下来我会详细描述项目的各个配置项.</p>
<hr>
<h2 id="Webpack配置-entries-js"><a href="#Webpack配置-entries-js" class="headerlink" title="Webpack配置 - entries.js"></a>Webpack配置 - entries.js</h2><p>先从Webpack的配置说起吧.</p>
<p>首先看<code>entries.js</code>, 我会把所有的<code>entry</code>和<code>output</code>以及<code>resolve</code>写在这里. 基本内容如下:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// entries.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: path.resolve(__dirname, <span class="string">&#x27;../examples/index.tsx&#x27;</span>),</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">&#x27;[name].js&#x27;</span>,</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">&#x27;../build/doc&#x27;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        extensions: [<span class="string">&#x27;.tsx&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>],</span><br><span class="line">        alias: &#123;</span><br><span class="line">            musicmaker: path.resolve(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>当然Docs页是个多页面情况, 肯定不止一个entry, 以后会动态添加的. 设置别名<code>musicmaker</code>是为了在引入MusicMaker库的时候更方便, 更接近使用场景:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置的话</span></span><br><span class="line"><span class="keyword">import</span> MusicMaker <span class="keyword">from</span> <span class="string">&#x27;musicmaker&#x27;</span>;</span><br><span class="line"><span class="comment">// 不设置的话</span></span><br><span class="line"><span class="keyword">import</span> MusicMaker <span class="keyword">from</span> <span class="string">&#x27;../musicmaker&#x27;</span>;</span><br><span class="line">impoer MusicMaker <span class="keyword">from</span> <span class="string">&#x27;../../../musicmaker&#x27;</span>;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Webpack配置-plugins-js"><a href="#Webpack配置-plugins-js" class="headerlink" title="Webpack配置 - plugins.js"></a>Webpack配置 - plugins.js</h2><p>我会把所有<code>plugins</code>和<code>optimization</code>的配置放在这里.</p>
<p>项目需要安装4个插件: html-webpack-plugin, clean-webpack-plugin, mini-css-extract-plugin和css-minimizer-webpack-plugin, 首先安装它们:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i -D html-webpack-plugin@next clean-webpack-plugin mini-css-extract-plugin css-minimizer-webpack-plugin</span><br></pre></td></tr></table></figure>

<h3 id="HTML模板插件和清空输出文件夹插件"><a href="#HTML模板插件和清空输出文件夹插件" class="headerlink" title="HTML模板插件和清空输出文件夹插件"></a>HTML模板插件和清空输出文件夹插件</h3><p>先看一下前两个插件, <code>plugins.js</code>文件包含以下代码:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// plugins.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cwp = <span class="keyword">new</span> (<span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>).CleanWebpackPlugin)();</span><br><span class="line"><span class="keyword">const</span> hwp = <span class="keyword">new</span> (<span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>))(&#123;</span><br><span class="line">    title: <span class="string">&#x27;MusicMaker&#x27;</span>,</span><br><span class="line">    favicon: path.resolve(__dirname, <span class="string">&#x27;../public/favicon.ico&#x27;</span>),</span><br><span class="line">    template: path.resolve(__dirname, <span class="string">&#x27;../public/index.html&#x27;</span>),</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> plugins = [cwp, hwp];</span><br></pre></td></tr></table></figure>

<p>CleanWebpackPlugin是用来在清除旧的构建文件的, 而HtmlWebpackPlugin是创建主html文件的.</p>
<h3 id="JavaScript代码分离"><a href="#JavaScript代码分离" class="headerlink" title="JavaScript代码分离"></a>JavaScript代码分离</h3><p>代码分离是Webpack的一个很有用的功能. 试想一下, 两个entry共用一个依赖库, 然后把依赖库各自打包到自己的bundle文件里. 这种代码重复的情况, 造成了打包体积过大, 浪费存储和网络资源, 且很不优雅.</p>
<p>我们在这里用到了<code>SplitChunksPlugin</code>这个插件(无需额外安装), 这个插件可以把共用的依赖库提取出来, 使一份代码仅被打包一次, 避免JavaScript代码重复. 在<code>plugins.js</code>里新加入下面的代码:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// plugins.js</span></span><br><span class="line"><span class="keyword">const</span> optimization = &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">        chunks: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="CSS代码分离"><a href="#CSS代码分离" class="headerlink" title="CSS代码分离"></a>CSS代码分离</h3><p>同样的, 项目也需要对CSS代码进行分离操作. 对CSS代码分离需要修改<code>plugins</code>和<code>loader</code>两部分, 出于速度方面的考虑, 仅在生产模式启用这一功能:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// plugins.js</span></span><br><span class="line"><span class="keyword">const</span> devMode = process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> mcepFun = <span class="function">() =&gt;</span> <span class="keyword">new</span> (<span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>))(&#123;&#125;);</span><br><span class="line"><span class="keyword">const</span> plugins = devMode ? [cwp, hwp] : [cwp, hwp, mcepFun()];</span><br></pre></td></tr></table></figure>

<h3 id="代码压缩"><a href="#代码压缩" class="headerlink" title="代码压缩"></a>代码压缩</h3><p>Webpack5会对生产模式下输出的JavaScript代码进行压缩, 这里需要配置的是CSS的代码压缩. 这里使用到的插件是<code>css-minimizer-webpack-plugin</code>, 修改<code>plugins.js</code>代码如下:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// plugins.js</span></span><br><span class="line"><span class="keyword">const</span> devMode = process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> cmwpFun = <span class="function">() =&gt;</span> <span class="keyword">new</span> (<span class="built_in">require</span>(<span class="string">&#x27;css-minimizer-webpack-plugin&#x27;</span>))();</span><br><span class="line"><span class="keyword">const</span> optimization = &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">        chunks: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    minimizer: devMode ? [<span class="string">&#x27;...&#x27;</span>] : [<span class="string">&#x27;...&#x27;</span>, cmwpFun()],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="完整配置"><a href="#完整配置" class="headerlink" title="完整配置"></a>完整配置</h3><p>至此, <code>plugins.js</code>完成, 完整的配置文件如下:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// plugins.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> devMode = process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cwp = <span class="keyword">new</span> (<span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>).CleanWebpackPlugin)();</span><br><span class="line"><span class="keyword">const</span> hwp = <span class="keyword">new</span> (<span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>))(&#123;</span><br><span class="line">    title: <span class="string">&#x27;MusicMaker&#x27;</span>,</span><br><span class="line">    favicon: path.resolve(__dirname, <span class="string">&#x27;../public/favicon.ico&#x27;</span>),</span><br><span class="line">    template: path.resolve(__dirname, <span class="string">&#x27;../public/index.html&#x27;</span>),</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> mcepFun = <span class="function">() =&gt;</span> <span class="keyword">new</span> (<span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>))(&#123;&#125;);</span><br><span class="line"><span class="keyword">const</span> cmwpFun = <span class="function">() =&gt;</span> <span class="keyword">new</span> (<span class="built_in">require</span>(<span class="string">&#x27;css-minimizer-webpack-plugin&#x27;</span>))();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> plugins = devMode ? [cwp, hwp] : [cwp, hwp, mcepFun()];</span><br><span class="line"><span class="keyword">const</span> optimization = &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">        chunks: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    minimizer: devMode ? [<span class="string">&#x27;...&#x27;</span>] : [<span class="string">&#x27;...&#x27;</span>, cmwpFun()],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123; plugins, optimization &#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Webpack配置-loaders-js"><a href="#Webpack配置-loaders-js" class="headerlink" title="Webpack配置 - loaders.js"></a>Webpack配置 - loaders.js</h2><p>接下来是很重要的Loader配置, 目前我想到的就是解析<code>.tsx</code>和<code>.scss</code>, 也就是解析TypeScript, React和Sass, 后续如果需要解析其他类型文件的话再进一步修改. 首先把本体们安装上:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i -D typescript</span><br><span class="line">npm i react react-dom</span><br><span class="line">npm i -D sass</span><br></pre></td></tr></table></figure>

<h3 id="解析-tsx"><a href="#解析-tsx" class="headerlink" title="解析.tsx"></a>解析<code>.tsx</code></h3><p>我会使用Babel对TypeScript, React和ES新特性进行解析, 安装命令如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i -D babel-loader @babel/core @babel/preset-env @babel/preset-react @babel/preset-typescript</span><br><span class="line">npm i core-js regenerator-runtime</span><br></pre></td></tr></table></figure>
<ul>
<li><code>@babel/core</code>是Babel的核心模块</li>
<li><code>@babel/preset-react</code>是Babel用于编译React的preset</li>
<li><code>@babel/preset-typescript</code>是Babel用于编译TypeScript的preset</li>
<li><code>core-js</code>和<code>regenerator-runtime</code>是为了使用如Promise等新特性而需引入的polyfill</li>
<li><code>babel-loader</code>是Webpack使用Babel的Loader</li>
</ul>
<p>现在编写<code>loader.js</code>配置文件, 内容如下:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// loader.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> include = [</span><br><span class="line">    path.resolve(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    path.resolve(__dirname, <span class="string">&#x27;../examples&#x27;</span>),</span><br><span class="line">];</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(t|j)sx?$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                options: &#123; <span class="attr">cacheDirectory</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">                include,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在项目根目录创建Babel的配置文件<code>.babelrc</code>, 内容如下:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .babelrc</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;presets&quot;</span>: [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&quot;@babel/env&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;targets&quot;</span>: <span class="string">&quot;defaults&quot;</span>, <span class="comment">// 以主流浏览器为构建目标</span></span><br><span class="line">                <span class="attr">&quot;useBuiltIns&quot;</span>: <span class="string">&quot;usage&quot;</span>, <span class="comment">// 按需引入polyfill</span></span><br><span class="line">                <span class="attr">&quot;corejs&quot;</span>: <span class="number">3</span>, <span class="comment">// core-js的版本</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;@babel/preset-react&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@babel/preset-typescript&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">Babel的`presets`是有顺序的, 按照从下到上的顺序解析.</span><br></pre></td></tr></table></figure>

<h3 id="解析-scss"><a href="#解析-scss" class="headerlink" title="解析.scss"></a>解析<code>.scss</code></h3><p>解析Sass需要安装3个Loader:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i -D sass-loader css-loader style-loader</span><br></pre></td></tr></table></figure>
<p>它们的作用分别如下:</p>
<ul>
<li><code>sass-loader</code>, 把Sass编译成CSS</li>
<li><code>css-loader</code>, 把CSS转换成JavaScript</li>
<li><code>style-loader</code>, 把JavaScript转换成&lt;style&gt;节点</li>
</ul>
<p>在生产环境把”CSS in JavaScript”转换成CSS文件需要<code>mini-css-extract-plugin</code>插件, 这个我们在代码分离部分说过.</p>
<p>安装完Loader后, 再编写loaders.js文件, 新增解析Sass的部分:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// loader.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> devMode = process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> mcepLoaderFun = <span class="function">() =&gt;</span> <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>).loader;</span><br><span class="line"><span class="keyword">const</span> include = [</span><br><span class="line">    path.resolve(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    path.resolve(__dirname, <span class="string">&#x27;../examples&#x27;</span>),</span><br><span class="line">];</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(t|j)sx?$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                options: &#123; <span class="attr">cacheDirectory</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">                include,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    devMode ? <span class="string">&#x27;style-loader&#x27;</span> : mcepLoaderFun(),</span><br><span class="line">                    <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">                ],</span><br><span class="line">                include,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Webpack实际配置文件"><a href="#Webpack实际配置文件" class="headerlink" title="Webpack实际配置文件"></a>Webpack实际配置文件</h2><p>前面说的是基础的配置, 只不过是分到了3个文件里, 现在要把这3个文件整合起来. 项目有2个Webpack命令, 需要2个配置文件, 内容很好理解:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// config.doc.js</span></span><br><span class="line">process.env.NODE_ENV = <span class="string">&#x27;production&#x27;</span>;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">    ...require(<span class="string">&#x27;./entries&#x27;</span>),</span><br><span class="line">    ...require(<span class="string">&#x27;./plugins&#x27;</span>),</span><br><span class="line">    ...require(<span class="string">&#x27;./loaders&#x27;</span>),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// config.doc.dev.js</span></span><br><span class="line">process.env.NODE_ENV = <span class="string">&#x27;development&#x27;</span>;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    ...require(<span class="string">&#x27;./entries&#x27;</span>),</span><br><span class="line">    ...require(<span class="string">&#x27;./plugins&#x27;</span>),</span><br><span class="line">    ...require(<span class="string">&#x27;./loaders&#x27;</span>),</span><br><span class="line">    devtool: <span class="string">&#x27;eval-cheap-module-source-map&#x27;</span>,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        open: <span class="literal">true</span>,</span><br><span class="line">        contentBase: <span class="string">&#x27;../build/doc&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在<code>config.doc.dev.js</code>里, 要配置好用于实时开发的<code>devtool</code>和<code>devServer</code>.</p>
<hr>
<h2 id="TypeScript配置"><a href="#TypeScript配置" class="headerlink" title="TypeScript配置"></a>TypeScript配置</h2><p>使用Babel的TypeScript插件是不会顾及<code>tsconfig.json</code>的内容的, 我们这里有2个TypeScript配置文件, 内容基本一致. <code>tsconfig.json</code>文件内容如下:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;es2015&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;es2015&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span>: <span class="string">&quot;react&quot;</span>, <span class="comment">// 支持react</span></span><br><span class="line">    <span class="attr">&quot;declaration&quot;</span>: <span class="literal">true</span>, <span class="comment">// 生成.d.ts文件</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span>: <span class="string">&quot;./build/lib&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;rootDir&quot;</span>: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;strict&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;paths&quot;</span>: &#123;<span class="attr">&quot;musicmaker&quot;</span>: [<span class="string">&quot;src&quot;</span>]&#125;, <span class="comment">// 配合baseUrl, 设置别名</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;include&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;src&quot;</span>, <span class="string">&quot;examples&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">我们的`src`和`examples`目录都使用了TypeScript, 为了让VSCode正确提示不报错, 所以`include`字段里包含了这连个目录. 但是, 使用`tsc`构建的时候, 只构建`src`目录, 所以需要另写一份配置文件, 更改的地方如下:</span><br><span class="line">```json</span><br><span class="line"><span class="comment">// tsconfig.lib.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;rootDir&quot;</span>: <span class="string">&quot;./src&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;include&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;src&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="关于VSCode插件"><a href="#关于VSCode插件" class="headerlink" title="关于VSCode插件"></a>关于VSCode插件</h2><p>我在项目里用到了下面的插件:</p>
<h3 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h3><p>ESLint是用于JavaScript/TypeScript/JSX/TSX/CSS/Sass等的语法检测的, 可以有效防止一些错误, 需先通过npm安装:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i -D eslint</span><br></pre></td></tr></table></figure>
<p>我把ESLint安装到了项目本地目录, 你也可以把它安到全局. 安装完成以后, 初始化ESLint. 在项目根目录执行以下命令:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npx eslint --init</span><br></pre></td></tr></table></figure>
<p>根据项目选择合适的选项, 比如我的这个项目是要用到React和TypeScript的, 那相应的选项要选择true. 命令执行后会生成一个<code>.eslintrc.js</code>文件.</p>
<p>之后我们可以安装VSCode的ESLint插件了, 插件会根据<code>.eslintrc.js</code>的配置对项目的文件语法进行检测, 对不符合规则的代码提出警告.</p>
<h3 id="Prettier"><a href="#Prettier" class="headerlink" title="Prettier"></a>Prettier</h3><p>安装VSCode的Prettier插件, 可以使代码的风格更加规范, 增强可读性. Prettier并不会对代码的语法进行检测, 它只是去对代码进行无语义变更的格式化.</p>
<p>安装Prettier的命令如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i -D prettier</span><br></pre></td></tr></table></figure>

<p>打开VSCode设置的<code>Format On Save</code>, 这样就可以每次保存的时候格式化代码了. 说实话写代码的时候不去关注格式, 之后一个CMD/Ctrl + s, 代码立刻变得漂亮, 这感觉是很棒的.</p>

  </div>
  <!--文末结束语-->
  
    <div style="text-align:center;color: #ccc;font-size:24px;"> --- 本文结束 <i class="iconfont icon-heartbeat" style="font-size:24px;"></i> The End --- </div>
  
  <!--页脚广告-->
  
  <div class="mdui-divider"></div>
  
  <nav>
    
    
      <a rel="next" class="post-nav-item mdui-float-right" href="/blog/2020/11/30/%E5%BC%80%E5%8F%91%E5%AE%8C%E5%96%84%E7%9A%84%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%BA%94%E7%94%A8/">
        <span>开发完善的跨平台应用</span>
        <i class="iconfont icon-angle-right"></i>
      </a>
    
  </nav>
</article>




  <div class="toc-button"  style="z-index: 100;">
    <button class="mdui-fab mdui-ripple mdui-color-teal" mdui-menu="{target: '#toc'}"><i class="iconfont icon-list"></i></button>
    <ul class="mdui-menu" id="toc">
      <li class="mdui-menu-item">
        <a href="/blog/2021/01/04/MusicMaker%E7%BC%96%E5%86%99%E8%AE%B0%E5%BD%951-Webpack%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" id="toc-header" class="mdui-ripple">文章目录</a>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#MusicMaker%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">MusicMaker简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E8%AE%BE%E6%83%B3"><span class="toc-number">2.</span> <span class="toc-text">项目设想</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA"><span class="toc-number">3.</span> <span class="toc-text">如何构建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E9%85%8D%E7%BD%AE-entries-js"><span class="toc-number">4.</span> <span class="toc-text">Webpack配置 - entries.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E9%85%8D%E7%BD%AE-plugins-js"><span class="toc-number">5.</span> <span class="toc-text">Webpack配置 - plugins.js</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTML%E6%A8%A1%E6%9D%BF%E6%8F%92%E4%BB%B6%E5%92%8C%E6%B8%85%E7%A9%BA%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6%E5%A4%B9%E6%8F%92%E4%BB%B6"><span class="toc-number">5.1.</span> <span class="toc-text">HTML模板插件和清空输出文件夹插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript%E4%BB%A3%E7%A0%81%E5%88%86%E7%A6%BB"><span class="toc-number">5.2.</span> <span class="toc-text">JavaScript代码分离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSS%E4%BB%A3%E7%A0%81%E5%88%86%E7%A6%BB"><span class="toc-number">5.3.</span> <span class="toc-text">CSS代码分离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9"><span class="toc-number">5.4.</span> <span class="toc-text">代码压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E9%85%8D%E7%BD%AE"><span class="toc-number">5.5.</span> <span class="toc-text">完整配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E9%85%8D%E7%BD%AE-loaders-js"><span class="toc-number">6.</span> <span class="toc-text">Webpack配置 - loaders.js</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90-tsx"><span class="toc-number">6.1.</span> <span class="toc-text">解析.tsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90-scss"><span class="toc-number">6.2.</span> <span class="toc-text">解析.scss</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E5%AE%9E%E9%99%85%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">Webpack实际配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TypeScript%E9%85%8D%E7%BD%AE"><span class="toc-number">8.</span> <span class="toc-text">TypeScript配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EVSCode%E6%8F%92%E4%BB%B6"><span class="toc-number">9.</span> <span class="toc-text">关于VSCode插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ESLint"><span class="toc-number">9.1.</span> <span class="toc-text">ESLint</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Prettier"><span class="toc-number">9.2.</span> <span class="toc-text">Prettier</span></a></li></ol></li></ol>
      </li>
    </ul>
  </div>



  </main>
  <footer id="footer" class="mdui-text-center mdui-m-t-5 mdui-p-b-2 mdui-p-t-4 mdui-color-theme">
  <div class="mdui-container">
    <div class="mdui-row">
      
      <span>
        &copy; 2019 - 2021 
        
          <span style="color:#d9333f" class="iconfont icon-heart"></span>
        
        sien75
      </span>
    </div>
    <div class="mdui-row">
      
        <div class="mdui-col-xs-6 mdui-text-right">
          <span>Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a></span>
        </div>
        <div class="mdui-col-xs-6 mdui-text-left">
          <span>Theme: <a href="https://github.com/kb1000fx/Meadow" rel="noopener" target="_blank">Meadow</a></span>
        </div>
      
    </div>
    <div class="mdui-row">
      
        <div class="mdui-col-xs-6 mdui-text-right">
          <span id="busuanzi_container_site_uv" style="display: none;"> <span class="iconfont icon-user"></span>总访客量 <span id="busuanzi_value_site_uv"></span></span>
        </div>
        <div class="mdui-col-xs-6 mdui-text-left">
          <span id="busuanzi_container_site_pv" style="display: none;"> <span class="iconfont icon-eye"></span>总访问量 <span id="busuanzi_value_site_pv"></span></span>
        </div>
      
    </div>
 </div>
</footer>
  
  <button id="gotop" class="mdui-fab mdui-fab-fixed mdui-fab-hide mdui-ripple mdui-color-teal" style="z-index:100;"><i class="iconfont icon-arrowup"></i></button>
  
  

    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>







<script src="/blog/js/mdui.min.js"></script>
<script src="/blog/js/meadow.js"></script>

</body>
</html >